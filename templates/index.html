<!DOCTYPE html>
<html>
<head>
    <title>Medicine Stock</title>
</head>
<body>
    <p>Welcome, {{ session['user'] }} | <a href="{{ url_for('logout') }}">Logout</a></p>
    <h1>Medicine Stock Manager - {{ clinic }} Clinic</h1>

    <form method="get" action="{{ url_for('index') }}">
        <label for="clinic">Select Clinic:</label>
        <select name="clinic" onchange="this.form.submit()">
            <option value="Boys" {% if clinic == 'Boys' %}selected{% endif %}>Boys</option>
            <option value="Girls" {% if clinic == 'Girls' %}selected{% endif %}>Girls</option>
        </select>
    </form>

    <p><a href="{{ url_for('dispatch', clinic=clinic) }}">Go to Dispatch Medicine Tab</a></p>

    <form method="POST" action="{{ url_for('add') }}">
        <input type="hidden" name="clinic" value="{{ clinic }}">
        <input type="text" name="name" placeholder="Medicine Name" required style="color: black; background-color: white; padding: 5px;">
        <input type="number" name="quantity" placeholder="Quantity" required style="color: black; background-color: white; padding: 5px;">
        <input type="submit" value="Add">
    </form>

    <h2>Current Stock for {{ clinic }} Clinic</h2>
    <table border="1">
        <tr>
            <th>Name</th>
            <th>Quantity</th>
            <th>Update</th>
            <th>Delete</th>
        </tr>
        {% for item in stock %}
        <tr>
            <td>{{ item['Name'] }}</td>
            <td>{{ item['Quantity'] }}</td>
            <td>
                <form method="POST" action="{{ url_for('update', clinic=clinic, name=item['Name']) }}">
                    <input type="number" name="quantity" value="{{ item['Quantity'] }}" required style="color: black; background-color: #f0f0f0; padding: 5px;">
                    <input type="submit" value="Update">
                </form>
            </td>
            <td><a href="{{ url_for('delete', clinic=clinic, name=item['name']) }}">Delete</a></td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
